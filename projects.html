<!DOCTYPE html>

<html>
    <head>
        <title>Projects</title>
        <meta name='viewport' content='width=device-width, initial-scale=1'>
        <link rel='stylesheet' type='text/css' media='screen' href='projects.css'>
    </head>

    <body>
        <h3>Projects</h3>
        <a href="index.html"><button>Home Page</button></a>
        <div class="section" id="poodle" data-label="Poodle">
            <h1>Poodle</h1>
        </div>
        <div class="section" id="chrome_sharp" data-label="Chrome Sharp">
            <h1>Chrome Sharp</h1>
        </div>
        <div class="section" id="reflector" data-label="Reflector">
            <h1>Reflector</h1>
        </div>
    </body>

    <script>
        /// Selects all of the section divs, creates 'nav' elements for them, and puts them in an array that is created in html.
        function activateNavigation() {
            const sections = document.querySelectorAll(".section");
            const navs = document.createElement("nav");
            const navItems = Array.from(sections).map(section => {
                return `
                    <div class="nav_item" data_for_section="${section.id}">
                        <a href="#${section.id}" class="nav_link"></a>
                        <span class="nav_label">${section.dataset.label}</span>
                    </div>
                `;
            });
    
            navs.classList.add("nav")
            navs.innerHTML = navItems.join("")
    
            const observer = new IntersectionObserver(entries => {
                document.querySelectorAll(".nav_link").forEach(navLink => {
                    navLink.classList.remove("nav_link_selected");
                });
    
                const visibleSection = entries.filter(entry => entry.isIntersecting)[0];
    
                document.querySelector(`.nav_item[data_for_section="${visibleSection.target.id}"] .nav_link`).classList.add("nav_link_selected");
    
            }, {threshold: 0.5 });
    
            sections.forEach(section => observer.observe(section));
    
            document.body.appendChild(navs);
    
        }   
    
        activateNavigation();
    
    </script>
</html>